<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- Include the CesiumJS JavaScript and CSS files -->
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  </head>
  <body>
    <div id="cesiumContainer"></div>
    <script>
      // Your access token can be found at: https://cesium.com/ion/tokens.
      // This is the default access token from your ion account
      Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5NzgxMWU2My1jNjQyLTRmZjgtYjU4OC1jMmQ4YWM2M2ZlMmYiLCJpZCI6NDA4OTQsImlhdCI6MTYwOTM1NDY3MH0.GAoOxzRX51YjwYzvczTHWT-c25S45oeBsUJPp0dV8m4';

      // Initialize the Cesium Viewer in the HTML element with the `cesiumContainer` ID.
      const viewer = new Cesium.Viewer('cesiumContainer', {
        terrainProvider: Cesium.createWorldTerrain()
      });

      // Add Cesium OSM Buildings, a global 3D buildings layer.
      const buildingTileset = viewer.scene.primitives.add(Cesium.createOsmBuildings());

      // Fly the camera to 'Abdij 6, Middelburg, The Netherlands'
      viewer.camera.flyTo({
  destination: Cesium.Cartesian3.fromDegrees(3.611, 51.478, 1600),
  orientation: {
    heading: Cesium.Math.toRadians(0.0),
    pitch: Cesium.Math.toRadians(-40.0)
  },
  duration: 1 // duration in seconds
});


// Load GeoJSON data from file
Cesium.GeoJsonDataSource.load('https://marcovantwerpen.github.io/dt3d/grensmburg.geojson').then(function(dataSource) {

// Add the data source to the map
viewer.dataSources.add(dataSource);

// Get the bounding rectangle of the data source
var boundingRectangle = dataSource.entities.computeExtent(viewer.scene).rectangle;

// Create a rectangle that covers the entire globe
var globeRectangle = new Cesium.Rectangle(-Math.PI, -Math.PI, Math.PI, Math.PI);

// Create a rectangle that covers the area outside of the bounding rectangle
var outsideRectangle = Cesium.Rectangle.subtract(globeRectangle, boundingRectangle, new Cesium.Rectangle());

// Create a material that makes the area outside the bounding rectangle transparent
var transparentMaterial = new Cesium.Color(0, 0, 0, 0);

// Create a rectangle graphics object that uses the transparent material
var rectangleGraphics = new Cesium.RectangleGraphics({
  coordinates: outsideRectangle,
  material: transparentMaterial
});

// Apply the rectangle graphics to the map
viewer.scene.primitives.add(new Cesium.Primitive({
  geometryInstances: new Cesium.GeometryInstance({
    geometry: new Cesium.RectangleGeometry({
      rectangle: outsideRectangle,
      vertexFormat: Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT
    }),
    id: 'transparent-rectangle'
  }),
  appearance: new Cesium.EllipsoidSurfaceAppearance({
    aboveGround: false,
    material: transparentMaterial
  })
}));

}).otherwise(function(error){
// Handle any errors that occur during GeoJSON data loading
console.error(error);
});

    </script>
  </body>
</html>
